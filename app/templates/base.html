<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Metadata Reconciliation System{% endblock %}</title>
    
    <!-- Brutalist Design System Foundation -->
    <style>
        /* Import brutalist fonts */
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            /* Brutalist Color System - 4 colors max */
            --primary-white: #FAFAFA;
            --structure-black: #1A1A1A;
            --accent-blue: #0066FF;
            --system-gray: #808080;
            --success-green: #00CC44;
            --warning-orange: #FF8800;
            --error-red: #FF3333;
            
            /* Brutalist Grid System */
            --grid-gap: 16px;
            --border-width: 2px;
            --border-radius: 0px;
            --shadow-offset: 4px;
            
            /* Typography System */
            --font-mono: 'JetBrains Mono', monospace;
            --font-sans: 'Inter', sans-serif;
        }
        
        /* Universal Reset for Brutalist Foundation */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* Body Foundation */
        body {
            font-family: var(--font-sans);
            background: var(--primary-white);
            color: var(--structure-black);
            line-height: 1.4;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Hide legacy card styling globally */
        .card {
            display: none;
        }
        
        /* Brutalist Navigation System */
        .brutalist-nav {
            background: var(--structure-black);
            border-bottom: var(--border-width) solid var(--structure-black);
            position: relative;
            z-index: 100;
        }
        
        .brutalist-nav::after {
            content: '';
            position: absolute;
            bottom: calc(-1 * var(--shadow-offset));
            left: 0;
            right: 0;
            height: var(--shadow-offset);
            background: var(--system-gray);
            z-index: -1;
        }
        
        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--grid-gap);
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            min-height: 64px;
            gap: var(--grid-gap);
        }
        
        /* System Logo */
        .system-logo {
            font-family: var(--font-mono);
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-white);
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: color 0.2s ease;
        }
        
        .system-logo:hover {
            color: var(--accent-blue);
        }
        
        /* Navigation Menu */
        .nav-menu {
            list-style: none;
            display: flex;
            gap: 0;
            justify-self: center;
        }
        
        .nav-item {
            border-right: 1px solid var(--system-gray);
        }
        
        .nav-item:last-child {
            border-right: none;
        }
        
        .nav-link {
            display: block;
            padding: 16px 20px;
            font-family: var(--font-mono);
            font-size: 11px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--primary-white);
            text-decoration: none;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .nav-link:hover,
        .nav-link.active {
            background: var(--accent-blue);
            color: var(--primary-white);
        }
        
        .nav-link.active::before {
            content: 'â–¶';
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 8px;
        }
        
        /* System Status Indicator */
        .system-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: var(--font-mono);
            font-size: 9px;
            color: var(--primary-white);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .status-indicator {
            width: 8px;
            height: 8px;
            background: var(--success-green);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Main Content Container */
        .main-content {
            min-height: calc(100vh - 128px);
            position: relative;
        }
        
        /* Brutalist Footer */
        .brutalist-footer {
            background: var(--structure-black);
            color: var(--primary-white);
            position: relative;
            margin-top: auto;
        }
        
        .brutalist-footer::before {
            content: '';
            position: absolute;
            top: calc(-1 * var(--shadow-offset));
            left: 0;
            right: 0;
            height: var(--shadow-offset);
            background: var(--system-gray);
        }
        
        .footer-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 24px var(--grid-gap);
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            gap: var(--grid-gap);
        }
        
        .footer-info {
            font-family: var(--font-mono);
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.8;
        }
        
        .footer-center {
            text-align: center;
            font-family: var(--font-mono);
            font-size: 11px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .footer-links {
            display: flex;
            gap: 16px;
            justify-self: end;
        }
        
        .footer-link {
            font-family: var(--font-mono);
            font-size: 9px;
            color: var(--primary-white);
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: color 0.2s ease;
        }
        
        .footer-link:hover {
            color: var(--accent-blue);
        }
        
        /* Flash Messages System */
        .flash-messages {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--grid-gap);
            position: relative;
            z-index: 90;
        }
        
        .flash-message {
            background: var(--primary-white);
            border: var(--border-width) solid;
            padding: 16px 20px;
            margin-bottom: var(--grid-gap);
            position: relative;
            font-family: var(--font-mono);
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .flash-message::before {
            content: '';
            position: absolute;
            top: var(--shadow-offset);
            left: var(--shadow-offset);
            right: calc(-1 * var(--shadow-offset));
            bottom: calc(-1 * var(--shadow-offset));
            z-index: -1;
        }
        
        .flash-message.success {
            border-color: var(--success-green);
            color: var(--success-green);
        }
        
        .flash-message.success::before {
            background: var(--success-green);
        }
        
        .flash-message.error {
            border-color: var(--error-red);
            color: var(--error-red);
        }
        
        .flash-message.error::before {
            background: var(--error-red);
        }
        
        .flash-message.warning {
            border-color: var(--warning-orange);
            color: var(--warning-orange);
        }
        
        .flash-message.warning::before {
            background: var(--warning-orange);
        }
        
        .flash-message.info {
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }
        
        .flash-message.info::before {
            background: var(--accent-blue);
        }
        
        /* Global Brutalist Utilities */
        .brutalist-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--grid-gap);
            min-height: calc(100vh - 128px);
        }
        
        .brutalist-block {
            background: var(--primary-white);
            border: var(--border-width) solid var(--structure-black);
            padding: 24px;
            position: relative;
            transition: none;
        }
        
        .brutalist-block::before {
            content: '';
            position: absolute;
            top: var(--shadow-offset);
            left: var(--shadow-offset);
            right: calc(-1 * var(--shadow-offset));
            bottom: calc(-1 * var(--shadow-offset));
            background: var(--structure-black);
            z-index: -1;
        }
        
        .brutalist-btn {
            background: var(--structure-black);
            color: var(--primary-white);
            border: none;
            padding: 16px 24px;
            font-family: var(--font-mono);
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            position: relative;
            text-decoration: none;
            display: inline-block;
            text-align: center;
            transition: all 0.1s ease;
        }
        
        .brutalist-btn::before {
            content: '';
            position: absolute;
            top: var(--shadow-offset);
            left: var(--shadow-offset);
            right: calc(-1 * var(--shadow-offset));
            bottom: calc(-1 * var(--shadow-offset));
            background: var(--accent-blue);
            z-index: -1;
            transition: all 0.1s ease;
        }
        
        .brutalist-btn:hover::before {
            top: 2px;
            left: 2px;
            right: -2px;
            bottom: -2px;
        }
        
        .brutalist-btn:active {
            transform: translate(2px, 2px);
        }
        
        .brutalist-btn:active::before {
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        
        /* Responsive Design */
        @media (max-width: 1024px) {
            .nav-container {
                grid-template-columns: auto 1fr;
                grid-template-rows: auto auto;
                grid-template-areas: 
                    "logo status"
                    "menu menu";
                min-height: auto;
                padding: var(--grid-gap);
            }
            
            .system-logo {
                grid-area: logo;
            }
            
            .system-status {
                grid-area: status;
                justify-self: end;
            }
            
            .nav-menu {
                grid-area: menu;
                justify-self: stretch;
                margin-top: var(--grid-gap);
                border-top: 1px solid var(--system-gray);
                padding-top: var(--grid-gap);
            }
            
            .footer-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto auto;
                text-align: center;
                gap: 12px;
            }
        }
        
        @media (max-width: 768px) {
            .nav-menu {
                flex-direction: column;
                gap: 0;
            }
            
            .nav-item {
                border-right: none;
                border-bottom: 1px solid var(--system-gray);
            }
            
            .nav-item:last-child {
                border-bottom: none;
            }
            
            .nav-link {
                padding: 12px 16px;
                text-align: center;
            }
            
            .brutalist-container {
                padding: 8px;
            }
        }
        
        /* Accessibility */
        @media (prefers-contrast: high) {
            :root {
                --primary-white: #FFFFFF;
                --structure-black: #000000;
                --system-gray: #666666;
            }
        }
        
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .status-indicator {
                animation: none;
            }
        }
        
        /* Focus styles for accessibility */
        .brutalist-btn:focus,
        .nav-link:focus,
        .system-logo:focus {
            outline: 2px solid var(--accent-blue);
            outline-offset: 2px;
        }
    </style>
    
    {% block styles %}{% endblock %}
</head>
<body>
    <!-- Brutalist Navigation -->
    <nav class="brutalist-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <a href="{{ url_for('index') if url_for else '/' }}" class="system-logo" aria-label="Return to homepage">
                METADATA_RECONCILIATION
            </a>
            
            <ul class="nav-menu" role="menubar">
                <li class="nav-item" role="none">
                    <a href="{{ url_for('upload') if url_for else '/upload' }}" 
                       class="nav-link {{ 'active' if request.endpoint == 'upload' else '' }}" 
                       role="menuitem">
                        UPLOAD
                    </a>
                </li>
                <li class="nav-item" role="none">
                    <a href="{{ url_for('jobs') if url_for else '/jobs' }}" 
                       class="nav-link {{ 'active' if request.endpoint == 'jobs' else '' }}" 
                       role="menuitem">
                        JOBS
                    </a>
                </li>
                <li class="nav-item" role="none">
                    <a href="{{ url_for('processing', job_id='') if url_for else '/processing' }}" 
                       class="nav-link {{ 'active' if request.endpoint == 'processing' else '' }}" 
                       role="menuitem">
                        PROCESSING
                    </a>
                </li>
                <li class="nav-item" role="none">
                    <a href="{{ url_for('review', job_id='') if url_for else '/review' }}" 
                       class="nav-link {{ 'active' if request.endpoint == 'review' else '' }}" 
                       role="menuitem">
                        REVIEW
                    </a>
                </li>
                <li class="nav-item" role="none">
                    <a href="{{ url_for('export', job_id='') if url_for else '/export' }}" 
                       class="nav-link {{ 'active' if request.endpoint == 'export' else '' }}" 
                       role="menuitem">
                        EXPORT
                    </a>
                </li>
            </ul>
            
            <div class="system-status" aria-label="System status">
                <span class="status-indicator" aria-hidden="true"></span>
                <span>SYSTEM_ACTIVE</span>
            </div>
        </div>
    </nav>
    
    <!-- Flash Messages -->
    {% if get_flashed_messages %}
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="flash-message {{ category }}" role="alert">
                            {{ message }}
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
    {% endif %}
    
    <!-- Main Content -->
    <main class="main-content" role="main">
        {% block content %}
        <!-- Default content when no template extends this -->
        <div class="brutalist-container">
            <div class="brutalist-block">
                <h1 style="font-family: var(--font-mono); font-size: 24px; font-weight: 700; text-transform: uppercase; margin-bottom: 16px;">
                    METADATA RECONCILIATION SYSTEM
                </h1>
                <p style="font-size: 14px; color: var(--system-gray); line-height: 1.6;">
                    Entity linking and authority control processing interface for cultural heritage organizations.
                    Upload metadata files to reconcile against authoritative linked data sources including Wikidata, VIAF, and Getty vocabularies.
                </p>
            </div>
        </div>
        {% endblock %}
    </main>
    
    <!-- Brutalist Footer -->
    <footer class="brutalist-footer" role="contentinfo">
        <div class="footer-container">
            <div class="footer-info">
                LIBRARY & INFORMATION SCIENCE
            </div>
            <div class="footer-center">
                RECONCILIATION_SYSTEM_V2.0
            </div>
            <div class="footer-links">
                <a href="#" class="footer-link">DOCS</a>
                <a href="#" class="footer-link">API</a>
                <a href="#" class="footer-link">GITHUB</a>
            </div>
        </div>
    </footer>
    
    {% block scripts %}{% endblock %}
</body>
</html>